---
title: 为什么MySQL中尽量不存入NULL值？
date: 2018-04-10 23:01:13
tags: mysql index
---

### 前言

最近通览了一遍《高性能MySQL 第3版》，对书中的很多知识点有了新的认识。

比如：

* MySQL提供了两种事务型的存储引擎：InnoDB和NDB Cluster（另外还有XtraDB和PBXT等第三方存储引擎）。如果业务中需要用到事务处理，就不要选用其他非事务型存储引擎了。

* 读锁是共享锁，写锁是排他锁。写锁能排到读锁队列前面。

* InnoDB存储引擎在性能(比如行级锁)和自动崩溃恢复方面有优势，所以在大多数非事务型存储的业务场景下也是最佳选择。InnoDB也是MySQL默认的存储引擎。

* 范式与反范式的区别和各自的优势。范式能节约存储空间，反范式能提高查询性能。

此外还有：

* 锁的粒度问题

* 索引及其优化问题

* 查询缓存问题

以上问题将会在后面的博文中有所涉及，这里先就下面一个问题作解答。

### 为什么MySQL中尽量不存入NULL值？

在平时开发中，我们定义model的时候，很多字段为了尽可能满足业务需求都会加上一个可为NULL的设置选项。

实际上这并不是一个好的方式。

* 1.索引对空值（NULL）不够友好。当可为NULL的列被索引时，每个索引需要一个额外的字节。在MyISAM里甚至还可能导致固定大小的索引变成可变大小的索引。

* 2.在MySQL中，可为NULL的列会占用更多的存储空间（InnoDB例外)，同时也需要特殊处理。

* 3.另外值得一提的是InnoDB使用单独的位(bit)存储NULL值，所以对于稀疏数据有很好的空间效率。

### 总结:

* 1.只有在使用InnoDB且确定该字段不会建立索引的情况下，该字段可以为NULL值。其它情况下，字段值尽量不为NULL值。

* **2.优化字段不为NULL值所能带来的好处并不会很明显。所以不要为了优化该项而使得业务逻辑变得更加复杂。**

虽然尽量避免NULL所能带来的好处并不大，笔者还是希望通过此文让大家对MySQL有更好的认识。


** *申明：该网站所有文章均为原创，转载请著名出处:`http://blog.lican.site`，谢谢！* **

<div id="SOHUCS" sid="mongodb index"></div>
