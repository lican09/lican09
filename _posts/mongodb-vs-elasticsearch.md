---
title: Mongodb与Elasticsearch的应用区别
date: 2018-01-16 22:15:06
tags: mongodb elasticsearch
---

### 前言

一个多月没有更新博客了，再次证明了我是一个爱偷懒的程序员(/笑脸)

2017年已过去，如果用一句话来总结自己，那就是：收获爱情，提升职能的一年。

总体来说过去的一年不算差，也不算太好。没有大风大浪，事业和爱情稳步进行着...

2018年的期望是自己能在职业道路上有所突破，其它的事儿也要一切顺利。

### 业务场景

笔者从以Mongodb为主要业务数据库做开发到现在应该有1年多的时间，随着公司的业务数据量逐渐积累，

现在也已经引进了传说中性能更强大的Elasticsearch作为业务数据库，以满足日益升级的业务需求。

最近正是在做Elasticsearch数据库相关的业务开发，因此对于两者的特点有了一些*个人*看法。

### 索引

Mongodb使用的是普通索引方式，索引存在于内存中。参考文章[MongoDB索引原理](http://www.mongoing.com/archives/2797)

Elasticsearch使用的是倒排索引，并且拥有一个独特的索引分析器。这种索引方式在海量数据中具有极强的优势。更详细的说明可以查看博文[Elasticsearch的索引模块（正排索引、倒排索引、索引分析模块Analyzer、索引和搜索、停用词、中文分词器）](https://yq.aliyun.com/articles/365698?spm=5176.10695662.1996646101.searchclickresult.552cf0876zn6KS)

### 查询性能

Mongodb对于查询数据有一个热缓存(缓存数据存在于内存中)，同时其索引也存在于内存中。查询中无论是命中缓存或者是命中索引，其返回速度极快。因此Mongodb的并发性能较好。

Elasticsearch有一个较为复杂的索引分析器，每一次搜索会有一个相对较于普通索引方式更复杂的过程，但其也有缓存机制。正常情况下并发性能方面应该不会比Mongodb强。

### 聚合性能

Mongodb聚合分析会遍历符合筛选条件的文档，每一次聚合即至少一次便利，每一次的聚合复杂度不会小于O(n)。

Elasticsearch因为有倒排索引对于聚合有绝对性优势，聚合分析并不一定会遍历每一条数据，故其查询复杂度可能会小于O(n)。

### 总结

**Mongodb**：并发查询性能较好，索引方式较为传统，适合做高并发量业务后端数据库。

**Elasticsearch**：对于聚合分析处理的性能极好，对于海量数据聚合分析相关的业务优选该数据库。


** *申明：该网站所有文章均为原创，转载请著名出处:`http://blog.lican.site`，谢谢！* **
